module.exports = require('app/photo/photo-model').extend({
  idAttribute: 'pid',
  
  
  parse: function (data, options) {
    if (data.pid) { // convert to photo model
      var collection = (options && options.collection) || this.collection;
      var event = collection.parent.event;
      var photo = event.categories.get(data.cat_id).photos.get(data.pid);
      var attrs = photo.toJSON();
      attrs._cat_id = data.cat_id;
      return attrs;
    }
    return data;
  },
  
  
  serialize: function () {
    return {
      pid: this.id,
      cat_id: this._cat_id,
    };
  },
});
