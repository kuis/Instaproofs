
- var app = require('app');
- var ua = require('app/util/ua/ua');
- var nl = model.name.length;
- var titleClass = nl >= 35 ? 'long-'+ Math.min(10, Math.floor((nl-25) / 10)) : '';
//- - app.storage.cropTipUsed = '';
.lightbox-photo
  .images
    .img
      .loader.white
      if app.loadedImages[model.thumb_url]
        .thumb(style="background-image:url("+ model.thumb_url +")")
      //- .full-img(style="background-image:url("+ model.url +")")
      //- img(src= model.img_url)
      img.original(src= model.getUrl('original'))
      img.black(src= 'about:blank')
      img.sepia(src= 'about:blank')
      .borders
      //- if model.name
        .photo-name= model.name
        
      .crop-covers
        .crop-cover.top
        .crop-cover.right
        .crop-cover.bottom
        .crop-cover.left
      
      .crop-handle.top-left
      .crop-handle.top-right
      .crop-handle.bottom-left
      .crop-handle.bottom-right
        
      .crop-controls.top
        //- .button.reset!= lz('Reset')
        .button.rotate
          span.size
          .spinner
          span.label!= lz('Rotate')
        
      .crop-controls.bottom
        .button.reset!= lz('Reset')
        //- .button.cancel!= lz('Cancel')
        .button.save!= lz('OK')
      
      if !app.storage.cropTipUsed && ua.desktop
        .crop-tips
          .crop-tip!= lz(ua.desktop ? '$crop-tips-desktop' : '$crop-tips-mobile')
    //- if model.pricing.colors_count > 1
      .variants: .text
        each color, id in model.pricing.colors
          .variant-button
            .variant-name(data-color-id=id, class=app.colors.get(id).prefix)
              = app.colors.get(id).name
    if model.name
      .title(class= titleClass): .text= model.name 
  .actions
    if model.pricing.colors_count > 1
      .action.variants.with-popover
        .tip!= lz('Variants')
        .variants-overlay
          each color, id in model.pricing.colors
            .variant-button(data-color-id=id, class=app.colors.get(id).prefix)= app.colors.get(id).name
    .action.cart: .tip!= lz('Add To Cart')
    .action.fav: .tip!= lz('Add To Favorites')
    if model.download_url && model.event.allowedDownload
      a.action.download(href= model.download_url, bypass)
        .tip!= lz('Download')
    .action.hide(class= model.event.allowedHide ? '' : 'noop'): .tip!= lz('Hide')
    if app.config.socialEnabled
      .action.share.with-popover
        .tip!= lz('Share')
        .sharing-overlay
          //- .social-button.instagram
          //- if true || social.sharing_delicious.enabled
            a.social-button.delicious
          //- if true || social.sharing_digg.enabled
            a.social-button.digg
          if true || social.sharing_facebook.enabled
            a.social-button.facebook(target='_blank', href= app.sharing.getUrl('facebook', model.id, model.event.id))
          if true || social.sharing_googleplus.enabled
            a.social-button.googleplus(target='_blank', href= app.sharing.getUrl('googleplus', model.id, model.event.id))
          //- if true || social.sharing_myspace.enabled
            a.social-button.myspace
          if true || social.sharing_pinterest.enabled
            a.social-button.pinterest(target='_blank', href= app.sharing.getUrl('pinterest', model.id, model.event.id))
          //- if true || social.sharing_reddit.enabled
            a.social-button.reddit
          if true || social.sharing_stumbleupon.enabled
            a.social-button.stumbleupon(target='_blank', href= app.sharing.getUrl('stumbleupon', model.id, model.event.id))
          if true || social.sharing_twitter.enabled
            a.social-button.twitter(target='_blank', href= app.sharing.getUrl('twitter', model.id, model.event.id))
          
    
  .lightbox-photo-cover
