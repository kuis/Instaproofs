/*==========================================================================*\
  Global Styles
\*==========================================================================*/
body {
  color: @black;
  font: 300 16px/1.4 @sans;
  /*background-color: #222;*/
  /*background-color: #f8f8f8;*/
  
  background: @white;
  
  // @media (max-width: 768px) {
  //   font-size: 14px;
  // }
  // @media (max-width: 500px) {
  //   font-size: 12px;
  // }
  
  // &.no-pointer-events {
  //   &.no-transitions, .page-scroll {
  //     pointer-events: none;
  //   }
  // }
}
html, body {
  padding: 0;
  margin: 0;
}

html.transitions-enabled {
  &, body {
    width: 100%;
    height: 100%;
    overflow: hidden;
  }
  body {
    position: relative;
  }
}

* {
  -webkit-tap-highlight-color: rgba(0,0,0,0);
}

.locked, .unlocked {
  &, body {
    width: 100%;
    height: 100%;
    overflow: hidden;
  }
}

a {
  -webkit-tap-highlight-color: transparent;
  text-decoration: none;
  color: @black;
  .desktop-ua &:hover {
    // text-decoration: underline;
    color: @highlighted;
  }
}

.mobile-ua .desktop-only { display: none !important; }
.desktop-ua .mobile-only { display: none !important; }
@media (max-width: 550px) {
  .wide-only {
    display: none;
  }
}

// span.full and span.short are used for full and short pieces of
// text toggled based on screen size 
span.short { display: none; }

span.linethrough { text-decoration: line-through; }

.highlighted-color {
  color: @highlighted;
}
.active-color {
  color: @active;
}

.lightbox-displayed main {
  display: none;
}


// fill container ============================================================
.fill {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}


// floats clearance ==========================================================
.clear { 
  width: 100%;
  height: 1px;
  margin: 0 0 -1px;
  clear: both;
}

#overlays {
  &:extend(.fill);
  position: fixed;
}

main {
  &, .content-cover {
    &:extend(.fill);
    position: fixed;
    width: 100%;
    height: 100%;
    z-index: 1;
  }
  overflow: hidden;
  
  background: @white;
  
  .no-transitions & {
    position: static !important;
  }
}

.content {
  max-width: 1200px;
  padding: 0 4%;
  margin: 0 auto;
  overflow: hidden;
}

.page {
  background: @white;
  .transitions-enabled & { transform: tranlsateZ(0) scale(1); opacity: 0.99; }
  // transform: none;
  transform-origin: bottom center;
  overflow: auto;
  .active& {
    -webkit-overflow-scrolling: touch;
  }
  
  &.hidden {
    opacity: 0;
  }
  
  // > * { transform: translateZ(0); }
  
  &, .page-scroller {
    &:extend(.fill);
    // transform: translate3d(0,0,0);
  }
  .dark-mode & { top: 44px; }
  
  .page-scroller {
    // &::-webkit-scrollbar {
    //   -webkit-appearance: none;
    //   width: 6px;
    //   .dark-mode .active& {
    //     background-color: #f5f5f5;
    //   }
    // }
    // &::-webkit-scrollbar-thumb {
    //   border-radius: 0;
    //   background-color: #ccc;
    //   .dark-mode .active& {
    //     background-color: @black;
    //   };
    // }
    
    .transitions-enabled & { transform: translateZ(0); }
  }
  
  .no-transitions & {
    position: static !important;
    .page-scroller {
      position: static !important;
      -webkit-overflow-scrolling: none !important;
      overflow: visible !important;
    }
  }
  
  
  
  .back-transition &, .forward-transition & {
    transform-origin: center center;
  }
  .locked & { 
    transition: transform 400ms ease-out;
    transform: scale(0.5);
  }
  .unlocked & {
    transition: transform 400ms ease-out;
    opacity: 1;
  }
  .locked.desktop-ua &, .unlocked.desktop-ua & {
    transition-duration: 600ms;
  }
  
  .no-transitions.locked & {
    transform: none;
    opacity: 0;
    transition: opacity 400ms ease-out;
  }
  .no-transitions.unlocked & {
    transform: none;
    opacity: 1;
    transition: opacity 400ms ease-out;
  }
  
  // .desktop-ua &, .mobile-ua & {
  animation: pageIn 600ms none;
  &.hidden {
    animation: pageOut 600ms forwards;
  }
  
  .back-transition & { animation-name: pageInBack; }
  .back-transition &.hidden { animation-name: pageOut; }
  .forward-transition &.hidden { animation-name: pageOutForward; }
  
  .left-transition & { animation-name: pageInLeft; transform-origin: left center; }
  .left-transition &.hidden { animation-name: pageOutLeft; transform-origin: right center; }
  .right-transition & { animation-name: pageInRight; transform-origin: right center; }
  .right-transition &.hidden { animation-name: pageOutRight; transform-origin: left center; }
  // .left-transition & { animation-name: fadeIn; transform-origin: left center; }
  // .left-transition &.hidden { animation-name: fadeOut; transform-origin: right center; }
  // .right-transition & { animation-name: fadeIn; transform-origin: right center; }
  // .right-transition &.hidden { animation-name: fadeOut; transform-origin: left center; }
  // }
  
  
  .firefox & {
    animation: fadeIn 600ms none;
    &.hidden { animation: fadeOut 600ms forwards; }
    .back-transition& { animation-name: fadeIn; }
    .back-transition&.hidden { animation-name: fadeOut; }
    .forward-transition&.hidden { animation-name: fadeOut; }
    
    // .left-transition& { animation-name: pageInLeft; transform-origin: left center; }
    // .left-transition&.hidden { animation-name: pageOutLeft; transform-origin: right center; }
    // .right-transition& { animation-name: pageInRight; transform-origin: right center; }
    // .right-transition&.hidden { animation-name: pageOutRight; transform-origin: left center; }
  }
  
  // .ios & {
  //   animation: fadeIn 400ms none;
  //   &.hidden {
  //     animation: fadeOut 400ms forwards;
  //   }
  // }
  &.no-animation, .no-transitions & {
    animation: none !important;
  }
  &.inactive {
    opacity: 0;
    animation: none !important;
  }
  
  
  .page-scroll {
    // position: relative;
    background: @white;
    min-height: 100%;
    display: flex;
    flex-direction: column;
    .transitions-enabled & { transform: translateZ(0); }
    // .transitions-enabled & > .page-content { transform: translate3d(0,0,0); }
    
    > .page-content {
      padding: 30px 0 15px;
      
      .dark-mode & {
        padding-bottom: 80px;
        flex-grow: 1;
      }
      .dark-mode.no-transitions & {
        padding-top: 74px;
      }
      @media (max-width: 500px) {
        padding-top: 50px;
        padding-bottom: 40px;
      }
    }
  }
  
}

// .content-cover, .page-cover, .ath-container {
//   z-index: 2;
//   position: fixed;
//   background: rgba(34,34,34,0.85);
//   opacity: 0;
//   // display: none;
//   transform-origin: 0 0;
//   transform: translate3d(0,0,0) scale(0,0);
//   animation: hideCover 400ms forwards;
//   .light-theme & { background: @white; background: rgba(255,255,255,0.7); }
//   &.displayed {
//     // display: block;
//     // opacity: 0.93;
//     animation: showCover 400ms forwards;
//   }
// }
// .page-cover {
//   top: 0;
//   left: 0;
//   right: 0;
//   bottom: 0;
//   z-index: 101;
// }

/*============================================================================*\
  Side-wide notices for lightbox
\*============================================================================*/
.lightbox-notices {
  z-index: 10000;
  &:extend(.fill);
  bottom: auto;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  display: none;
  .lightbox-displayed & {
    display: flex;
  }
  
  transform: translate3d(0,-101%,0);
  transition: transform 200ms, opacity 200ms;
  opacity: 0;
  .notices-displayed & {
    transform: translate3d(0,0,0);
    opacity: 1;
  }
  
  
  .box {
    color: @white;
    background: @black;
    padding: 20px 20px 0;
    border-radius: 3px;
    border-top-left-radius: 0;
    border-top-right-radius: 0;
    max-width: 350px;
  }
  
  .notice {
    padding-bottom: 15px;
    &:after {
      content: '';
      display: block;
      width: 100%;
      height: 0;
      margin: 15px auto 0;
      border-bottom: fadeout(@white, 50%) 1px dashed;
      // border-bottom: @white 1px dashed;
    }
    &:last-child:after {
      display: none;
    }
  }
  
  .buttons {
    display: flex;
    justify-content: flex-end;
    padding-bottom: 20px;
  }
}


/*============================================================================*\
  Buttons
\*============================================================================*/
.button {
  cursor: pointer;
  display: inline-block;
  height: 32px;
  padding: 0 15px;
  border-radius: 3px;
  box-sizing: border-box;
  
  color: @white;
  background: #333;
  .desktop-ua &:hover {
    background: #222;
  }
  text-align: center;
  font: 300 16px/32px @sans;
  text-transform: uppercase;
  
  &.highlighted {
    background: @highlighted;
    .desktop-ua &:hover {
      background: darken(@highlighted, 10%)
    }
  }
  &.light {
    color: @black;
    background: #e5e5e5;
    line-height: 30px;
    border: #ccc 1px solid;
    background: none;
    .desktop-ua &:hover { background: rgba(0,0,0,.12); }
    
    .dark-mode & {
      color: inherit;
      .desktop-ua&:hover { background-color: rgba(255,255,255,.12); }
    }
  }
  
  &.large {
    height: 44px;
    padding: 0 20px;
    font: 300 18px/44px @sans;
  }
  
  &.with-loader {
    position: relative;
    > .loader {
      top: 7px;
      left: 50%;
      margin-left: -15px; 
      opacity: 0;
      transition: opacity 200ms;
    }
    > span {
      transition: opacity 200ms;
    }
    &.highlighted > {
      .loader {
        &:after {
          border-color: @highlighted;
        }
      }
    }
    
    &.loading {
      > span { opacity: 0; }
      > .loader { opacity: 1; }
    }
  }
  
}



/*============================================================================*\
  Page Header
\*============================================================================*/
.page-header {
  margin: 3em 0;
  text-align: center;
  @media (max-height: 1000px) {
    margin: 1em 0 2em;
  }
  
  > h1 {
    font: bold 1.875em/1.2 @oswald;
    text-transform: uppercase;
    margin-bottom: 0.3em;
  }
  
  > .page-path {
    > span, > a {
      margin: 0 5px;
    }
  }
}



/*==========================================================================*\
  Decorated Headings
\*==========================================================================*/
.heading {
  height: 6.25em;
  position: relative;
  margin-top: 6.25em;
  margin-top: 3em;
  
  display: flex;
  align-items: center;
  
  .line {
    flex: 1 0 auto;
    height: 1px;
    background: @grey-lines;
  }
  
  &:before {
    // content: '';
    display: block;
    width: 100%;
    height: 1px;
    background: @grey-lines;
    position: absolute;
    top: 50%;
    z-index: 1;
    
    // .dark-mode & {
    //   background: #222;
    // }
  }
  
  > .label {
    background: @grey-lines;
    color: #262626;
    
    background: @highlighted;
    color: @white;
    
    font: 300 normal 2em/1.2 @oswald;
    text-align: center;
    text-transform: uppercase;
    
    box-sizing: border-box;
    min-width: 3.125em;
    // min-height: 3.125em;
    padding: .7em 1em;
    // padding-top: 22px;
    margin: 0 auto;
    border: @grey-lines 1px solid;
    // border: @highlighted 1px solid;
    box-shadow: inset 0 0 0 4px @white,
                25px 0 0 0 @white,
                -25px 0 0 0 @white;
    
    position: relative;
    z-index: 2;
    
    .dark-mode & {
      // color: #fff;
      // background: @white;
      // background: #444;
      // border: #222 1px solid;
    }
    
    // position: absolute;
    // left: 50%;
    // top: 0;
    // margin-left: -50px;
    
    display: flex;
    flex-flow: column nowrap;
    justify-content: center;
    align-items: center;
    
    i {
      font: 300 .6em/1.3 @sans;
      display: block;
    }
    
    small {
      color: #838383;
      font: 400 .5em/1.2 @sans;
      display: block;
      margin-top: 5px;
    }
  }
  > a.label:hover {
    text-decoration: none;
    border-color: #999;
  }
}



/*==========================================================================*\
  Popovers
\*==========================================================================*/
.popover {
  display: none;
  
  position: absolute;
  
  height: 26px;
  padding: 0 10px;
  border-radius: 2px;
  
  transform: translateX(5px);
  
  font: 300 14px/26px @sans;
  white-space: nowrap;
  
  color: @white;
  background: rgba(0,0,0,0.9);
  z-index: 5;
  
  .desktop-ua &:hover {
    display: none !important;
  }
  
  &.highlighted { background-color: @highlighted; }
  
  &:after { // arrow 
    content: '';
    display: block;
    position: absolute;
    width: 0; 
    height: 0;
  }
  
  &.left { // displayed to the left of the target 
    left: -10px;
    top: 3px;
    transform: translateX(-100%);
    &:after {
      top: 8px;
      right: -5px;
      border-top: 5px solid transparent;
      border-bottom: 5px solid transparent;
      border-left: 5px solid rgba(0,0,0,0.9);
    }
    &.highlighted:after { border-left-color: @highlighted; }
  }
  &.right { // displayed to the right of the target 
    left: 100%;
    top: 3px;
    transform: translateX(10px);
    &:after {
      top: 8px;
      left: -5px;
      border-top: 5px solid transparent;
      border-bottom: 5px solid transparent;
      border-right: 5px solid rgba(0,0,0,0.9);
    }
    &.highlighted:after { border-right-color: @highlighted; }
  }
  &.bottom-left { // displayed below the target, to the left
    right: 0;
    bottom: -31px;
    &:after {
      top: -5px;
      right: 10px;
      border-left: 5px solid transparent;
      border-right: 5px solid transparent;
      border-bottom: 5px solid rgba(0,0,0,0.9);
    }
  }
}


@-ms-viewport { width: device-width; }
