/*==========================================================================*\
  Social sharing functionality
\*==========================================================================*/
"use strict";
var app = require('app');
var ua = require('app/utils/ua');

module.exports = {
  popup: function (e, platform, pid, title, summary) {
    var social = app.config.social['sharing_'+ platform];
    var href = this.getUrl(platform, pid);
    // if (social) {
    //   href = decodeURI(social.url).replace('[[product_id]]', pid);
    // }
    // else {
    //   switch (platform) {
    //     case 'instagram':
    //       break;
    //   }
    // }
    // "http://www.instaproofs.com/socialBookmark.php?sb=1&url=%2Fshare.php%3Fid%3Devent_id%26v3%3D1%26pid%3Dproduct_id&pid=[[product_id]]"
    var winWidth = 520;
    var winHeight = 350;
    switch (platform) {
      case 'googleplus':
        winWidth = 1020;
        winHeight = 520;
        break;
      case 'twitter':
        winWidth = 600;
        winHeight = 450;
        break;
    }
    var winTop = (screen.height / 2) - (winHeight / 2);
    var winLeft = (screen.width / 2) - (winWidth / 2);
    switch (platform) {
      case 'facebook':
        // href = 'http://www.facebook.com/sharer.php?s=100&p[title]=' + title + 
        //     '&p[summary]=' + summary + '&p[url]=' + url + '&p[images][0]=' + image
        break;
    }
    
    window.open(href, 'sharer', 'top='+ winTop +',left='+ winLeft +
        ',toolbar=0,status=0,width='+ winWidth +',height='+ winHeight);
    
    if (e && e.preventDefault) e.preventDefault();
    return false;
  },
  
  getUrl: function (platform, pid) {
    var social = app.config.social['sharing_'+ platform];
    if (social) {
      return social.url.replace(/www\.instaproofs/gi, 'demo.instaproofs')
                       .replace('[[product_id]]', pid);
    }
    else {
      switch (platform) {
        case 'instagram':
          break;
      }
    }
  },
};
